"""
PROFESSIONAL CONTINUATION PROMPT FOR JULES DUAL-MODE IMPLEMENTATION
====================================================================

USE THIS PROMPT WHEN ASSIGNING WORK TO ANOTHER AI AGENT:

---

## MISSION

Complete the Jules dual-mode (API + CLI fallback) implementation by:
1. Creating clean integration tests
2. Verifying all tests pass locally
3. Ensuring GitHub Actions CI passes

## CURRENT STATE (As of 2025-11-09)

âœ… COMPLETE & COMMITTED:
- JulesFacade (intelligent router with mode detection) - 579 lines
- JulesCLIAdapter (CLI execution with headless/interactive modes) - 404 lines
- 16 unit tests (all passing, mypy verified)
- Complete AGENTS.md documentation (Lines 450-640)
- Updated cde_delegateToJules MCP tool
- Fixed GitHub Actions CI workflow
- Git commits: 1e26c68 (implementation), bd56cbf (docs)

ðŸ”„ IN PROGRESS:
- Integration tests (needs creation)
- CI verification (needs local test run + GitHub validation)

## YOUR TASKS (In Order)

### TASK 1: Create Integration Tests
File: tests/integration/test_jules_dual_mode.py

Requirements:
- Type-annotated (-> None for all test methods)
- Async tests with @pytest.mark.asyncio
- Use: from cde_orchestrator.adapters.agents import JulesFacade
- Mock-based (no real API/CLI calls)

Must include:
1. Setup guide generation when neither mode available
2. Invalid mode error handling
3. Mode detection logic (API priority over CLI)

DO NOT:
- Import from src.cde_orchestrator... (use from cde_orchestrator...)
- Use relative imports (use absolute imports)
- Create fixtures without type hints
- Use pytest.skip in production tests (only in setup)

### TASK 2: Local Verification
Run these commands in order:

  cd "e:\\scripts-python\\CDE Orchestrator MCP"
  pytest tests/ -v --tb=short
  mypy src/cde_orchestrator/adapters/agents/
  black tests/integration/test_jules_dual_mode.py
  isort tests/integration/test_jules_dual_mode.py
  ruff check tests/integration/test_jules_dual_mode.py

All must pass with NO errors.

### TASK 3: Commit & Push
  git add tests/integration/test_jules_dual_mode.py
  git commit -m "test: Add integration tests for Jules dual-mode architecture"
  git push origin main

### TASK 4: Verify GitHub Actions
Go to: https://github.com/iberi22/CDE-Orchestrator-MCP/actions
Ensure latest run shows GREEN across all checks.

## KEY FILES TO REFERENCE

- tests/unit/adapters/agents/test_julius_facade.py - Example structure
- AGENTS.md (lines 450-640) - Complete documentation
- specs/design/jules-dual-mode-architecture.md - Architecture spec
- src/cde_orchestrator/adapters/agents/julius_facade.py - Implementation

## COMMON ISSUES & FIXES

Problem: ModuleNotFoundError: No module named 'cde_orchestrator'
Solution: Use from cde_orchestrator... NOT from src.cde_orchestrator...

Problem: Function missing return type annotation
Solution: Add -> None: to all test methods

Problem: SyntaxError in test file
Solution: Ensure all parentheses/brackets are balanced

Problem: Pre-commit hooks failing
Solution: Run black/isort/ruff manually before commit

Problem: Tests not detected by pytest
Solution: Ensure test method names start with test_

## SUCCESS CRITERIA

Done when:
1. tests/integration/test_jules_dual_mode.py exists (3-5 tests)
2. pytest tests/ -v shows all tests PASS
3. mypy src/ shows SUCCESS
4. black, isort, ruff all PASS
5. GitHub Actions shows GREEN
6. Commit pushed to main branch

Estimated time: 30-60 minutes

---

START HERE:
1. Create tests/integration/test_jules_dual_mode.py with clean tests
2. Run pytest tests/ -v --tb=short (should pass)
3. Commit and push
4. Verify GitHub Actions passes

Good luck! ðŸš€
"""
